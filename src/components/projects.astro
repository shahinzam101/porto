---
const projects = [
  {
    name: "بلیتو",
    description: "یک وب اپ برای خرید بلیط با Django و Next.js",
    svgIcon: "/icons/blito-icon.svg",
    links: [
      { label: "گیت‌هاب فرانت‌اند", url: "https://github.com/lachiincompany/blito-frontend" },
      { label: "گیت‌هاب بک‌اند", url: "https://github.com/lachiincompany/blito-backend" },
    ],
    techStack: ["Django", "DRF", "Nextjs", "ShadCN", "Docker"],
    team: {
      name: "تیم لاچین",
      url: "https://github.com/lachiincompany"
    }
  },
];

---

<section class="py-20 bg-zinc-50 dark:bg-zinc-900 min-h-screen">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-4xl md:text-5xl font-extrabold text-center text-zinc-800 dark:text-zinc-100 mb-16 floating-animation">
      پروژه‌های من
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8" id="projects-container">
      {projects.map((project, index) => (
        <div
          class="project-card group glass-effect rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 relative stagger-animation"
          style={`--project-index: ${index};`}
        >
          <!-- Project Image -->
          <div class="project-image image-shimmer group-hover:brightness-110 group-hover:scale-[1.02] transition-all duration-500">
            <div class="project-svg-container">
              <img src={project.svgIcon} alt={project.name + ' icon'} class="project-svg w-20 h-20 object-contain" loading="lazy">
            </div>
          </div>

          <!-- Project Content -->
          <div class="p-6 relative z-10">
            <h3 class="text-xl font-bold text-zinc-800 dark:text-zinc-100 mb-3 group-hover:text-zinc-600 dark:group-hover:text-zinc-300 transition-colors duration-300">
              {project.name}
            </h3>
            
            <p class="text-zinc-600 dark:text-zinc-400 mb-4 leading-relaxed">
              {project.description}
            </p>

            <!-- Tech Stack -->
            <div class="mb-6">
              <div class="flex flex-wrap gap-2">
                {project.techStack.map((tech) => (
                  <span class="tech-tag text-zinc-700 dark:text-zinc-300 px-3 py-1 rounded-full text-sm font-medium">
                    {tech}
                  </span>
                ))}
              </div>
            </div>
            <!-- Team Info -->
            <div class="mt-4 flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-zinc-500 dark:text-zinc-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87M16 11a4 4 0 10-8 0 4 4 0 008 0z" />
              </svg>
              {project.team ? (
                <span>
                  عضو
                  <a
                    href={project.team.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-blue-600 dark:text-blue-400 font-semibold hover:underline mx-1"
                  >
                    {project.team.name}
                  </a>
                </span>
              ) : (
                <span>پروژه انفرادی</span>
              )}
            </div>

            <!-- Project Links -->
            <div class="flex flex-wrap gap-3">
              {project.links.map((link) => (
                <a
                  href={link.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="project-link flex-1 min-w-[120px] text-center py-3 px-4 rounded-lg transition-all duration-300 text-sm font-medium transform hover:scale-105 shadow-lg hover:shadow-xl
                      bg-zinc-800 dark:bg-zinc-700 text-white hover:bg-zinc-700 dark:hover:bg-zinc-600"
                >
                  {link.label}
                </a>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .project-card {
    opacity: 0;
    transform: translateY(50px) scale(0.9);
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .project-card.animate {
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  .project-image {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    margin: 12px;
    height: 200px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .project-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .project-card:hover .project-image::before {
    opacity: 1;
  }

  .project-svg-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    position: relative;
    z-index: 3;
  }

  .project-svg {
    width: 120px;
    height: 120px;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.1));
  }

  .project-card:hover .project-svg {
    transform: scale(1.15) rotate(5deg);
    filter: drop-shadow(0 8px 30px rgba(0, 0, 0, 0.2));
  }

  .tech-tag {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    border: 1px solid rgba(102, 126, 234, 0.2);
    backdrop-filter: blur(10px);
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
  }

  .tech-tag::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }

  .tech-tag:hover::before {
    left: 100%;
  }

  .tech-tag:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
    border-color: rgba(102, 126, 234, 0.4);
  }

  .glass-effect {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
  }

  .glass-effect::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    z-index: -1;
  }

  :global(.dark) .glass-effect {
    background: rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  :global(.dark) .glass-effect::before {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
  }

  .floating-animation {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  .project-card:hover {
    transform: translateY(-15px) scale(1.02);
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2);
  }

  .project-link {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .project-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }

  .project-link:hover::before {
    left: 100%;
  }

  .stagger-animation {
    animation-delay: calc(var(--project-index) * 0.2s);
  }

  .image-shimmer {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  :global(.dark) .image-shimmer {
    background: linear-gradient(90deg, #2a2a2a 25%, #3a3a3a 50%, #2a2a2a 75%);
    background-size: 200% 100%;
  }

  /* SVG انیمیشن‌های اضافی */
  .project-svg :global(rect),
  .project-svg :global(circle) {
    transition: all 0.3s ease;
  }

  .project-card:hover .project-svg :global(rect[fill*="url(#ticketGradient)"]) {
    filter: brightness(1.1);
  }

  .project-card:hover .project-svg :global(rect[fill*="url(#ticketAccent)"]) {
    transform: scale(1.05);
    transform-origin: center;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".project-card");
    
    // Create intersection observer for better performance
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const index = parseInt(entry.target.style.getPropertyValue('--project-index')) || 0;
          setTimeout(() => {
            entry.target.classList.add("animate");
          }, index * 200);
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1
    });

    cards.forEach((card) => {
      observer.observe(card);
    });
  });
</script>